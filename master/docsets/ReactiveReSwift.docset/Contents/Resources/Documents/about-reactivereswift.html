<!DOCTYPE html>
<html lang='en'>
  <head>
    <title>About ReactiveReSwift  Reference</title>
    <link rel='stylesheet' type='text/css' href='css/jazzy.css' />
    <link rel='stylesheet' type='text/css' href='css/highlight.css' />
    <meta charset='utf-8'>
    <script src='js/jquery.min.js' defer></script>
    <script src='js/jazzy.js' defer></script>
  </head>
  <body>


    <a title='About ReactiveReSwift  Reference'></a>

    <header class='header'>
      <p class='header-col header-col--primary'>
        <a class='header-link' href='index.html'>
          ReactiveReSwift Docs
        </a>
         (80% documented)
      </p>
    
        <p class='header-col header-col--secondary'>
          <a class='header-link' href='https://github.com/ReSwift/ReactiveReSwift'>
            <img class='header-icon' src='img/gh.png'/>
            View on GitHub
          </a>
        </p>
    
        <p class='header-col header-col--secondary'>
          <a class='header-link' href='dash-feed://http%3A%2F%2FReSwift%2Egithub%2Eio%2FReactiveReSwift%2Fmaster%2Fdocsets%2FReactiveReSwift%2Exml'>
            <img class='header-icon' src='img/dash.png'/>
            Install in Dash
          </a>
        </p>
    </header>

    <p class='breadcrumbs'>
      <a class='breadcrumb' href='index.html'>ReactiveReSwift Reference</a>
      <img class='carat' src='img/carat.png' />
      About ReactiveReSwift  Reference
    </p>

    <div class='content-wrapper'>
      <nav class='navigation'>
        <ul class='nav-groups'>
          <li class='nav-group-name'>
            <a class='nav-group-name-link' href='Documentation.html'>Documentation</a>
            <ul class='nav-group-tasks'>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='about-reactivereswift.html'>About ReactiveReSwift</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='why-reactivereswift.html'>Why ReactiveReSwift</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='getting-started-guide.html'>Getting Started Guide</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='installation.html'>Installation</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='reactive-extensions.html'>Reactive Extensions</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='example-projects.html'>Example Projects</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='contributing.html'>Contributing</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='credits.html'>Credits</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='get-in-touch.html'>Get in touch</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='changelog.html'>Changelog</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='license.html'>License</a>
              </li>
            </ul>
          </li>
          <li class='nav-group-name'>
            <a class='nav-group-name-link' href='Core.html'>Core</a>
            <ul class='nav-group-tasks'>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Classes/Store.html'>Store</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Core.html#/s:P15ReactiveReSwift9StateType'>StateType</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Core.html#/s:P15ReactiveReSwift6Action'>Action</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Structs/Reducer.html'>Reducer</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Structs/Middleware.html'>Middleware</a>
              </li>
            </ul>
          </li>
          <li class='nav-group-name'>
            <a class='nav-group-name-link' href='Reactive.html'>Reactive</a>
            <ul class='nav-group-tasks'>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Protocols/StreamType.html'>StreamType</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Protocols/ObservablePropertyType.html'>ObservablePropertyType</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Protocols/SubscriptionReferenceType.html'>SubscriptionReferenceType</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Classes/ObservableProperty.html'>ObservableProperty</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Structs/ObservablePropertySubscriptionReference.html'>ObservablePropertySubscriptionReference</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Classes/SubscriptionReferenceBag.html'>SubscriptionReferenceBag</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class='main-content'>

        <section class='section'>
          <div class='section-content'>
            
            <a href='#about-reactivereswift' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='about-reactivereswift'>About ReactiveReSwift</h1>

<p>ReactiveReSwift relies on a few principles:
- <strong>The Store</strong> stores your entire app state in the form of a single data structure. This state can only be modified by dispatching Actions to the store. Whenever the state in the store changes, the store will notify all observers.
- <strong>Actions</strong> are a declarative way of describing a state change. Actions don&rsquo;t contain any code, they are consumed by the store and forwarded to reducers. Reducers will handle the actions by implementing a different state change for each action.
- <strong>Reducers</strong> provide pure functions, that based on the current action and the current app state, create a new app state</p>

<p><img src="img/reactivereswift_concept.png" alt=""></p>

<p>For a very simple app, one that maintains a counter that can be increased and decreased, you can define the app state as following:</p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">AppState</span><span class="p">:</span> <span class="kt">StateType</span> <span class="p">{</span>
  <span class="k">var</span> <span class="nv">counter</span><span class="p">:</span> <span class="kt">Int</span>
<span class="p">}</span>
</code></pre>

<p>You would also define two actions, one for increasing and one for decreasing the counter. For the simple actions in this example we can use an enum that conforms to action:</p>
<pre class="highlight swift"><code><span class="kd">enum</span> <span class="kt">AppAction</span><span class="p">:</span> <span class="kt">Action</span> <span class="p">{</span>
    <span class="k">case</span> <span class="kt">Increase</span>
    <span class="k">case</span> <span class="kt">Decrease</span>
<span class="p">}</span>
</code></pre>

<p>Your reducer needs to respond to these different actions, that can be done by switching over the value of action:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">appReducer</span> <span class="o">=</span> <span class="kt">Reducer</span><span class="o">&lt;</span><span class="kt">AppState</span><span class="o">&gt;</span> <span class="p">{</span> <span class="n">action</span><span class="p">,</span> <span class="n">state</span> <span class="k">in</span>
    <span class="k">switch</span> <span class="n">action</span> <span class="k">as?</span> <span class="kt">AppAction</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">.</span><span class="kt">Increase</span><span class="p">?:</span>
        <span class="n">state</span><span class="o">.</span><span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">case</span> <span class="o">.</span><span class="kt">Decrease</span><span class="p">?:</span>
        <span class="n">state</span><span class="o">.</span><span class="n">counter</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="k">default</span><span class="p">:</span>
        <span class="k">break</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">state</span>
<span class="p">}</span>
</code></pre>

<p>A single <code>Reducer</code> should only deal with a single field of the state struct. You can chain together multiple reducers using <code>Reducer(firstReducer, secondReducer, ...)</code>.</p>

<p>In order to have a predictable app state, it is important that the reducer is always free of side effects, it receives the current app state and an action and returns the new app state.</p>

<p>To maintain our state and delegate the actions to the reducers, we need a store. Let&rsquo;s call it <code>mainStore</code> and define it as a global constant, for example in the app delegate file:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">mainStore</span> <span class="o">=</span> <span class="kt">ObservableStore</span><span class="p">(</span>
  <span class="nv">reducer</span><span class="p">:</span> <span class="n">appReducer</span><span class="p">,</span>
  <span class="nv">stateType</span><span class="p">:</span> <span class="kt">AppState</span><span class="o">.</span><span class="k">self</span><span class="p">,</span>
  <span class="nv">observable</span><span class="p">:</span> <span class="kt">ObservableProperty</span><span class="p">(</span><span class="kt">AppState</span><span class="p">(</span><span class="nv">counter</span><span class="p">:</span> <span class="mi">0</span><span class="p">))</span>
<span class="p">)</span>

<span class="kd">@UIApplicationMain</span>
<span class="kd">class</span> <span class="kt">AppDelegate</span><span class="p">:</span> <span class="kt">UIResponder</span><span class="p">,</span> <span class="kt">UIApplicationDelegate</span> <span class="p">{</span>
    <span class="p">[</span><span class="o">...</span><span class="p">]</span>
<span class="p">}</span>
</code></pre>

<p>Lastly, your view layer, in this case a view controller, needs to tie into this system by subscribing to store updates and emitting actions whenever the app state needs to be changed:</p>
<pre class="highlight swift"><code><span class="kd">class</span> <span class="kt">CounterViewController</span><span class="p">:</span> <span class="kt">UIViewController</span> <span class="p">{</span>

  <span class="kd">private</span> <span class="k">let</span> <span class="nv">disposeBag</span> <span class="o">=</span> <span class="kt">SubscriptionReferenceBag</span><span class="p">()</span>
  <span class="kd">@IBOutlet</span> <span class="k">var</span> <span class="nv">counterLabel</span><span class="p">:</span> <span class="kt">UILabel</span><span class="o">!</span>

  <span class="k">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">disposeBag</span> <span class="o">+=</span> <span class="n">mainStore</span><span class="o">.</span><span class="n">observable</span><span class="o">.</span><span class="n">subscribe</span> <span class="p">{</span> <span class="p">[</span><span class="k">weak</span> <span class="k">self</span><span class="p">]</span> <span class="n">state</span> <span class="k">in</span>
      <span class="k">self</span><span class="p">?</span><span class="o">.</span><span class="n">counterLabel</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">"</span><span class="se">\(</span><span class="n">state</span><span class="o">.</span><span class="n">counter</span><span class="se">)</span><span class="s">"</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="kd">@IBAction</span> <span class="kd">func</span> <span class="nf">increaseButtonTapped</span><span class="p">(</span><span class="nv">sender</span><span class="p">:</span> <span class="kt">UIButton</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">mainStore</span><span class="o">.</span><span class="nf">dispatch</span><span class="p">(</span>
      <span class="kt">AppState</span><span class="o">.</span><span class="kt">CounterActionIncrease</span>
    <span class="p">)</span>
  <span class="p">}</span>

  <span class="kd">@IBAction</span> <span class="kd">func</span> <span class="nf">decreaseButtonTapped</span><span class="p">(</span><span class="nv">sender</span><span class="p">:</span> <span class="kt">UIButton</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">mainStore</span><span class="o">.</span><span class="nf">dispatch</span><span class="p">(</span>
      <span class="kt">AppState</span><span class="o">.</span><span class="kt">CounterActionDecrease</span>
    <span class="p">)</span>
  <span class="p">}</span>

<span class="p">}</span>
</code></pre>

<p>The <code>mainStore.observable.subscribe</code> block will be called by the <code>ObservableStore</code> whenever a new app state is available, this is where we need to adjust our view to reflect the latest app state.</p>

<p>Button taps result in dispatched actions that will be handled by the store and its reducers, resulting in a new app state.</p>

<p>This is a very basic example that only shows a subset of ReactiveReSwift&rsquo;s features, read the Getting Started Guide to see how you can build entire apps with this architecture. For a complete implementation of this example see the <a href="https://github.com/Qata/ReactiveCounterExample">ReactiveCounterExample</a> project.</p>

<p><a href="https://realm.io/news/benji-encz-unidirectional-data-flow-swift/">You can also watch this talk on the motivation behind ReSwift</a>.</p>

          </div>
        </section>


      </article>
    </div>
    <section class='footer'>
      <p>© 2016 <a class="link" href="https://github.com/ReSwift/ReSwift" target="_blank" rel="external">ReSwift</a>. All rights reserved.</p>
      <p>Generated by <a class='link' href='https://github.com/realm/jazzy' target='_blank' rel='external'>jazzy ♪♫ v0.7.3</a>, a <a class='link' href='http://realm.io' target='_blank' rel='external'>Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
